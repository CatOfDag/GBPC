<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh">
<head>
    <meta charset="UTF-8">
    <title>详情</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>
<body>
<div th:include="publictemplate :: css"></div>
<div class="layui-header" style="background: #393d49">
    <p style="color: white;font-size: 30px;padding-top: 7px">湖南科技学院中层干部年度考核测评系统</p>
    <ul class="layui-nav layui-layout-right">
        <li class="layui-nav-item"><a href="/logout">退出</a></li>
    </ul>
</div>
<div class="layui-col-md6 layui-col-xs12 layui-col-lg-offset3">
    <blockquote class="layui-elem-quote">
        <span class="x-red" th:text="${cadre.cadreName}"></span> 的信息页面！
        <span class="x-red" style="color: red" th:text="${warning1}"></span>
        <a th:if="${warning1 == null}">
            <span class="x-red" style="color: red" th:text="${warning}"></span>
        </a>

        <div style="float: right">
            <button class="layui-btn" id="editCadre">
                <i class="layui-icon">&#xe61f;</i>编辑信息
            </button>
        </div>
    </blockquote>
    <table class="layui-table">
        <colgroup>
            <col width="300">
            <col>
        </colgroup>
        <tbody>
        <tr>
            <td colspan="2">
                <p align="center">
                    <span th:if="${cadreInfo==null or cadreInfo.headerPic==null}">
                        <img th:src="@{/headpic/nopic.png}" height="170px">
                    </span>
                    <span th:if="${cadreInfo != null and cadreInfo.headerPic!=null}">
                        <img  th:src="@{/headpic/{headpic}(headpic=${cadreInfo.headerPic})}" height="170px">
                    </span>
                </p>
            </td>
        </tr>
        <tr>
            <td>姓名</td>
            <td th:text="${cadre?.cadreName}"></td>
        </tr>
        <tr>
            <td>职务</td>
            <td th:text="${cadre?.job}"></td>
        </tr>
        <tr>
            <td>个人简介</td>
            <td th:text="${cadreInfo?.info}"></td>
        </tr>
        <tr>
            <td>附件下载</td>
            <td>

                <span th:if="${cadreInfo==null or cadreInfo.filePath==null}">
                        <a>无附件</a>
                    </span>
                <span th:if="${cadreInfo != null and cadreInfo.filePath!=null}">
                        <a th:href="@{/doc/{doc}(doc=${cadreInfo?.filePath})}" style="color: #0B61A4">下载附件</a>
                    </span>
            </td>
        </tr>
        </tbody>
    </table>

</div>
<script th:inline="javascript">
    //防止页面后退
    history.pushState(null, null, document.URL);
    window.addEventListener('popstate', function () {
        history.pushState(null, null, document.URL);
    });

    layui.use(["element", "table", "form", "jquery", "laydate", "upload"], function () {
        var table = layui.table;
        var form = layui.form;
        var laydate = layui.laydate;
        var upload = layui.upload;

        $("#editCadre").click(function () {
            layer.open({
                title: "编辑个人信息",
                type: 2,
                shade: false,
                maxmin: true,
                shade: 0.5,
                anim: 4,
                area: ["40%", "75%"],
                content: "cadreInfoEdit?cadreName=" + [[${cadre.cadreName}]] + "&job=" + [[${cadre.job}]],
                zIndex: layer.zIndex,
                end: function () {
                    $(".layui-laypage-btn")[0].click();
                }
            });
        })
    });

</script>

</body>
</html>
